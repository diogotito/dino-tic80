-- title:   game title
-- author:  game developer, email, etc.
-- desc:    short description
-- site:    website link
-- license: MIT License (change this to your license of choice)
-- version: 0.1
-- script:  lua

TILE_SKY = 1
TILE_BG  = 18  N_BG = 2
TILE_DUG = 22

-- first Y coordinate where dirt begins
GROUND_Y = (function()
	for y=0,135 do
		if mget(0,y) ~= TILE_SKY then
			return y
end end end)()


function clamp(v,min,max)
	return math.max(math.min(v,max),min)
end

function btoi(b)
	return b and 1 or 0
end


CAM_SPEED = 1.0
cam = { x=0, y=0 }

function cam.move()
	local UP, DOWN, LEFT, RIGHT, A, B =
	  0, 1, 2, 3, 4, 5

	local speed = CAM_SPEED
	  * (btn(A) and 2.0 or 1) -- faster
	  * (btn(B) and 0.5 or 1) -- slower

	local dx, dy =
		btoi(btn(RIGHT)) - btoi(btn(LEFT)),
		btoi(btn(DOWN))  - btoi(btn(UP))

	cam.x, cam.y =
		clamp(cam.x + speed * dx, 0, 239),
		clamp(cam.y + speed * dy, 0, 135)
end

-- Dirt tunnel edge effect autotiling
-- remap funcion

FLAG_HOLLOW = 0
FLAG_DIRT   = 1
AUTOTILE_BASE = 127

function autotile_dirt_edge(id, x, y)
	if not fget(id, FLAG_HOLLOW) then
		return 0 -- a transparent tile
	end

	id = AUTOTILE_BASE
	for i, adj in ipairs{{x=x  , y=y-1},
	                     {x=x  , y=y+1},
	                     {x=x-1, y=y  },
	                     {x=x+1, y=y  }}
	do
		local adj_id = mget(adj.x, adj.y)
		if fget(adj_id, FLAG_DIRT) then
			id = id + (1 << (i-1))
		end
	end
	return id
end


-- TIC cart lifecycle

t = 0

function BOOT()
	-- background music
	music(0)
	copy_initial_palette()
	set_dark_palette(0.3)
end


function BDR(scanline)
	if scanline == 0 then
		set_dark_palette(0)
	elseif scanline >= 4 and
	       scanline < 14 then
		local mul=0.2+0.15*((t+scanline)%2)
		set_dark_palette(mul)
	elseif scanline >= 14 and
	       scanline <  17 then
		local mul = 1-(.7-.15*((t+scanline)%2))
		              *(17-scanline)/3
		set_dark_palette(mul)
	elseif scanline == 17 then
		set_dark_palette(0)
	end
end


function TIC()
	cam.move()
	cls()

	-- paint background
	local tx = .5*cam.x //(8*N_BG)*N_BG
	local ty = .5*cam.y //(8*N_BG)*N_BG
	local sx = .5*cam.x % (8*N_BG)
	local sy = .5*cam.y % (8*N_BG)
	map(tx,ty, 32,19, -sx,-sy, -1, 1,
		function (id, x, y)
			if y > GROUND_Y then
				return TILE_BG + (x+y) % N_BG
			else
				return TILE_SKY
			end
		end)

	-- paint dirt tiles and edge effect
	sx, sy = cam.x % 8, cam.y % 8
	tx, ty = cam.x //8, cam.y //8
	map(tx,ty, 31,18, -sx,-sy, {0,15}, 1,
		function (id, x, y)
			if id == TILE_DUG then
				local up   = mget(x, y-1)
				local down = mget(x, y+1)
				if up~=TILE_DUG and fget(up,FLAG_HOLLOW) then
					return 38
				elseif down~=TILE_DUG and fget(down,FLAG_HOLLOW) then
					return 70
				else
					return 54
				end
			else
				return id
			end
		end)

	map(tx,ty, 31,18, -sx,-sy, {0,15}, 1,
	    autotile_dirt_edge)

	draw_hud(tx, ty, t)

	t = t + 1
end

-------------------------------------


function draw_hud(tx, ty, t)
	-- Darkened overlay on top
	local SCREEN    = 0x00000
	local CURSED    = 0x17100
	local N_LINES   = 12 * 240/2
	vbank(0)
	memcpy(CURSED, SCREEN, N_LINES)
	vbank(1)
	cls(15)
	memcpy(SCREEN, CURSED, N_LINES)

	-- Display info
	local function hud_txt(txt, x)
		local SH = 11 -- text shadow
		local FG = 12 -- text foreground
		local  Y = 3
		print(txt, x+1, Y+1, SH, true)
		print(txt, x  , Y  , FG, true)
	end

	local mm,ss = t//60^2, t//60%60
	local sep=(t%60 < 30) and ":" or " "
	local txt1, txt2 =
			("%02d/%02d"):format(tx,ty),
			("%2d%s%02d"):format(mm,sep,ss)
	hud_txt(txt1,  16)
	hud_txt(txt2, 202)

	spr(176, 5, 2, {0})
	spr(177+t//3%10, 195, 2, {0})

	-- Restore VRAM bank
	vbank(0)
end


do --palette ** RESERVED ** memcpy hax

	local N_PALS = 10
	local PAL    = 0x3FC0
	local CURSED = 0x17000

	function copy_initial_palette()
		vbank(0)
		memcpy(CURSED, PAL, 3*N_PALS)

		-- also setup vbank 1 transparency
		local OVR_TRANS = 0x3FF8
		vbank(1)
		poke(OVR_TRANS, 15)
		vbank(0)
	end

	-- hax: setup bank 1 palette
	-- as a darkened version of bank 0
	function set_dark_palette(mul)
		local DARK = {
			[0]=peek(CURSED+0),
			[1]=peek(CURSED+1),
			[2]=peek(CURSED+2),
		}

		vbank(1)
		for i=3, 3*N_PALS do
			local orig = peek(CURSED+i)
			local dark = DARK[i%3]
			poke(PAL+i, dark+mul*(orig-dark))
		end
		vbank(0)
	end

end--palette ** RESERVED ** memcpy hax
-- <TILES>
-- 001:9999999999999999999999999999999999999999999999999999999999999999
-- 009:0000000000000000000000000000000000000000000000000000000000000033
-- 010:0000000000000000000000000000003300003333000033330000333333333333
-- 011:0000000000000000000000000000000033300000333333303333333033333330
-- 012:0000000000000000000000000000000000000000000000000000000033330000
-- 016:1111111111111111166216612662261221112622111112211611661116111111
-- 017:1111111111266111222221112111221216111222166111211611111111111161
-- 018:0000000000200000000001000000000000000000001000000000001000000000
-- 019:0000000000000010010000000000000000002000000000000000001000000000
-- 022:3333333333333333333333333333333333333333333333333333333333333333
-- 025:0000003303333333033333333333333333333333333333333333333333333333
-- 026:3333333333333333333333333333333333333333333333333333333333333333
-- 027:3333333333333333333333333333333333333333333333333333333333333333
-- 028:3333300033333300333333303333333033333330333333303333333333333333
-- 032:9818111199111891911919191111111119119119981981911911911991111191
-- 033:1111111111111111111111111111111111111111111111111111111111111111
-- 035:0000000000001000000000000070007000700070076703670367076776633666
-- 038:2000000222020202232203222222022022222322203223323222022322322322
-- 049:0000000000000000000000000000000000006666000660660006666600066666
-- 050:0000000000000000000000000000000066600000666600006666000066660000
-- 054:2232232222322322233333333322232223222322232232333333333222322322
-- 064:0000000060000000600000006600006666600666666666666666666606666666
-- 065:0006666600666666666666606666666666666600666666006666666666666606
-- 066:6666000066660000000000006600000000000000000000000000000000000000
-- 070:2230322202222320223202220322033002022202002202020002020000000000
-- 080:0066666600066666000066660000066600000666000006600000060000000660
-- 081:6666660066666600666660006666000006600000006000000060000000660000
-- 083:f35555ff3f3333fff555555fff6060ffff6666fff63222ffff22225ff5ffffff
-- 084:ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff
-- 099:0055550000444400055555500066660000166100043113407033330700500500
-- 128:1111111101010101000000000000000000000000000000000000000000000000
-- 129:0000000000000000000000000000000000000000000000001010101011111111
-- 130:1111111101010101000000000000000000000000000000001010101011111111
-- 131:1100000010000000110000001000000011000000100000001100000010000000
-- 132:1111111111010101100000001100000010000000110000001000000011000000
-- 133:1100000010000000110000001000000011000000100000001101010111111111
-- 134:1111111111010101100000001100000010000000110000001010101011111111
-- 135:0000000100000011000000010000001100000001000000110000000100000011
-- 136:1111111101010101000000110000000100000011000000010000001100000001
-- 137:0000001100000001000000110000000100000011000000011010101111111111
-- 138:1111111101010101000000110000000100000011000000011010101111111111
-- 139:1000001111000001100000111100000110000011110000011000001111000001
-- 140:1111111111010101100000111100000110000011110000011000001111000001
-- 141:1000001111000001100000111100000110000011110000011010101111111111
-- 142:1111111110101011110000111000000111000011100000011110101111111111
-- 176:0000b000000bdb0000bdbb000bddddb000bbbdb0000bdb0000bdb000000b0000
-- 177:0b0000b0bebbbbeb0beeeeb0bedcbdebbdccbcdbbedccdeb0beeeeb000bbbb00
-- 178:0b0000b0bebbbbeb0beeeeb0bedccbebbdccbcdbbedccdeb0beeeeb000bbbb00
-- 179:0b0000b0bebbbbeb0beeeeb0bedccdebbdccbbdbbedccdeb0beeeeb000bbbb00
-- 180:0b0000b0bebbbbeb0beeeeb0bedccdebbdccbcdbbedccbeb0beeeeb000bbbb00
-- 181:0b0000b0bebbbbeb0beeeeb0bedccdebbdccbcdbbedcbdeb0beeeeb000bbbb00
-- 182:0b0000b0bebbbbeb0beeeeb0bedccdebbdcbccdbbedbcdeb0beeeeb000bbbb00
-- 183:0b0000b0bebbbbeb0beeeeb0bedccdebbdcbccdbbebccdeb0beeeeb000bbbb00
-- 184:0b0000b0bebbbbeb0beeeeb0bedccdebbdbbccdbbedccdeb0beeeeb000bbbb00
-- 185:0b0000b0bebbbbeb0beeeeb0bebccdebbdcbccdbbedccdeb0beeeeb000bbbb00
-- 186:0b0000b0bebbbbeb0beeeeb0bedbcdebbdcbccdbbedccdeb0beeeeb000bbbb00
-- </TILES>

-- <MAP>
-- 000:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 001:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 002:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 003:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 004:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 005:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 006:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 007:101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:011101110111011161610111011101110111011101110111011101110111011101116161616101110111011101110111011101110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:011101110111011161610111011101110111011101110111011101110111011101110161616101110111011101000000000000000000000000000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:011101110111011161610111011101110111011101110111011101110111011101110111616101110111011101000000000000000012001200000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:011101110111011161610111011101110111011101110111011101110111011101110111016161610111011101000012000012001200120012000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:011101110111011161610111011101110111011101110111011101110111011101110111011161616161011101000000000000120012001200000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:011101110111011161610111616161616161011101110111011101110111011101110111011101000061011101000000000012001200120012000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 014:011101110111011161616161616161616161616161610111011101110111011101110111011101110100000001000000000000000012001200000011000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 015:011101110111011161610111016161610111011161616111011101110111011101110111011101110111000001110111313131313131313131313111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:011101110111011161610111011161110111011101616161611101110111011101110111011101110111010000000111323232323232323232323211000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 017:011101110111011161610111011161110111011101110161616101110111011101110111011101110111011100000011011101110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 018:011101110111011161610111011161110111011101110111016161110111011101110111011101110111011101000000011101110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 019:011101110111011161610111011161110111011101110111011161110111016101110111016101110111011101110000001101110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 020:011101110111011161610111011161616161616161616161026161110111011101110111011101110161011101110100000001110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 021:011101110111011161610111011161116111016101116111011161110111011101110111011101110111011101110111000001110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 022:011101110111011161610111011161116111016101116111011161610111011101110011011100110111011101110111010000110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 023:011101110111011161610111011161116111026102116161011161110111011101110111011101110111011100110111011100110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 024:011101110111011161610111011161116111026102116161616161110111011101110111011101110111011101110111011100113511011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 025:011101110111011100610111011101110011020202110111011100110111011100110111011101110111010001110111011100110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 026:011101110111011100000111011101110011011101110111011100000111011101110111010001110111011101110111011100110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 027:011101110111011100000100000000000000000001110111010000110111011101110111011101110111011101110111011136110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 028:011101110111011100000100011101110111011101000000000001110111011101110111011101110111011101000111011101110111011101110111000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 029:011101110111011100000111010000000000001100000111011101110111011101110111011101110111011101110111011101110111011101110111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 030:011101110111011100000000000000000000000000110111011101110111011101110111011101110111011101110111011101110111011101110111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 031:011101110111011100000111011101110111011101110111011101110111011101110100000000000000000000000000000000000000000000031323110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 032:011101110111011100000111011101110111011101110111011101110111011101000000000000000000000000000000000000000000000000041424110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 033:011101110111011100000111011101110111011101110111011101110111010000000000000000000000000000000000000000000000000000051525110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 034:000000000000001111111100000000000000000000000000000000000000111111111111111111111111111111111111111111111111111111111111110000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </MAP>

-- <WAVES>
-- 000:fffedca8654322110000000000000000
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- 003:9bcdeeffffeedcb96432110000112346
-- 004:579bdeffedb987789bcddcb975310013
-- 005:56789abcdffecbbbba87544443100234
-- 006:79bdefedb8ba97656787656532345656
-- 007:43210123579bcdefedca865432112234
-- 008:9acdeffedccddca96532112210012356
-- 009:4201369cfc9631234201369cfc963123
-- 010:8acefeca86468ac963579b9753101357
-- 011:79bccb97410358bdffdb853357899856
-- 012:655679bcdeeeedca87655679abba9877
-- 013:0000ffff0000ffff0000ffff0000ffff
-- 014:0369cffdb98653210000000000000000
-- </WAVES>

-- <SFX>
-- 000:0e001e003e006e0f9e0ece0cee0afe08fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00270000000000
-- 001:00d010d030d060e090f0c0f0e0f0f0f0f0f0f0f0f000f000f000f000f000f000f000f000f000f000f000f000f000f000f000f000f000f000f000f0003f0000000000
-- 002:03f723c34380635e730c930ab309c308d308d308e308e308e308e308f308f308f308f308f308f308f308f308f308f308f308f308f308f308f308f308b80000000000
-- 012:030013012300330f430043014300430f430043014300430f430043014300430f330023011300030f030003011300230f330043016300930fc300f301600000000000
-- 051:0ec01ec03ec06ecf9ececedceedafe08fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe00fe003f0000000000
-- 061:330033013300330f430043014300430f430043014300430f430043013300330f230013010300030f030013011300230f230043016300930fc300e301604000000000
-- 062:04001400240034003400440044004400540064006400740084009400a400b400b400c400d400d400d400e400f400f400f400f400f400f400f400f400305000000000
-- 063:0f001f003f006f009f00cf00ef00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00ff00300000000000
-- </SFX>

-- <PATTERNS>
-- 000:400004000010000020000000400004000000000020000010400004000000000020000010400004000000000020000000400004000010000020000000400004000020000020000020400004000000000020000000400004000000000020000000400004000010000020000000400004000000000020000000400004000000000020000000400004000000000020000000400004000010000010000000400004000000000020000000400004000000000020000000400004000000000020000000
-- 001:000000000020000000000020000000000020000000000020000000000020000000000020000000000020000000000000000000600016400026000000000000000020400026000000000000000020400026000000000000000020400026000000000000600018400026000000000000000020400026000000000000000020400026000000000000000020400026000000000000600016800016000000000000000020400026000000000000000020400026000000000000000020400026000000
-- 015:000000000020000000000020000000000020000000000020000000000020000000000020000000000020000000000000000000600016400026000000000000000020400026000000000000000020400026000000000000000020400026000000000000600018400026000000000000000020400026000000000000000020400026000000000000000020400026000000000000600016800016000000000000000020400026000000000000000020400026000000000000000020400026000000
-- 016:000000600018400026000010000000000000400026000000000000000000400026000000000000000000400026000000000000600016800016000000000000000000400026000000000000000000400026000000000000000000400026000000000000600018400026000000000000000000400026000000000000000000400026000000000000000000400026000000000000600016800016000000000000000000400026000000000000000000400026000000000000000000400026000000
-- 031:0000000000c00000000000000000000000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000000000005000ca7000ca8000ca7000ca0000008000ca7000ca6000ca1000c06000ca6000ca6000ca7000ca8000ca0000000000005000ca7000ca8000ca7000ca0000008000ca7000ca6000ca1000c06000ca6000ca6000ca8000ca7000ca000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 032:0000000000c00000000000000000000000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000c00000000000005000ca7000ca8000ca7000ca0000008000ca7000ca6000ca1000c06000ca6000ca6000ca7000ca8000ca0000000000005000ca7000ca8000ca7000ca0000008000ca7000ca6000ca1000c06000ca6000ca6000ca8000ca7000ca000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </PATTERNS>

-- <TRACKS>
-- 000:104000144020144120000000000000000000000000000000000000000000000000000000000000000000000000000000ec0000
-- </TRACKS>

-- <FLAGS>
-- 000:10100000000000000000000000000000202010100000100000000000000000002020001000002000000000000000000010101000000020000000000000000000000010000000200000000000000000000000101000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </FLAGS>

-- <PALETTE>
-- 000:2f2a35443d386256539a5d40a981433b42626f7777989da0c2b8a9d9dbba000404ffffff000000000000000000000000
-- 001:2f2a35000000000000000000000000000000000000000000000000000000000000000000d9dbbaffca10ee381c000000
-- </PALETTE>

-- <PALETTE1>
-- 000:2f2a35443d386256539a5d40a981433b42626f7777989da0c2b8a9d9dbba000404ffffff000000000000000000000000
-- </PALETTE1>

